FRENSIE_INITIALIZE_PACKAGE_TESTS(monte_carlo_event_core)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

FRENSIE_ADD_TEST_EXECUTABLE(ObserverParticleStateWrapper DEPENDS tstObserverParticleStateWrapper.cpp)
FRENSIE_ADD_TEST(ObserverParticleStateWrapper)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverPhaseSpaceDimension DEPENDS tstObserverPhaseSpaceDimension.cpp)
FRENSIE_ADD_TEST(ObserverPhaseSpaceDimension)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverPhaseSpaceDimensionTraits DEPENDS tstObserverPhaseSpaceDimensionTraits.cpp)
FRENSIE_ADD_TEST(ObserverPhaseSpaceDimensionTraits)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverCosineDimensionDiscretization DEPENDS tstObserverCosineDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverCosineDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverSourceEnergyDimensionDiscretization DEPENDS tstObserverSourceEnergyDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverSourceEnergyDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverDirectionDimensionDiscretization DEPENDS tstObserverDirectionDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverDirectionDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverEnergyDimensionDiscretization DEPENDS tstObserverEnergyDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverEnergyDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverSourceTimeDimensionDiscretization DEPENDS tstObserverSourceTimeDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverSourceTimeDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverTimeDimensionDiscretization DEPENDS tstObserverTimeDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverTimeDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverCollisionNumberDimensionDiscretization DEPENDS tstObserverCollisionNumberDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverCollisionNumberDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverSourceIdDimensionDiscretization DEPENDS tstObserverSourceIdDimensionDiscretization.cpp)
FRENSIE_ADD_TEST(ObserverSourceIdDimensionDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ObserverPhaseSpaceDiscretization DEPENDS tstObserverPhaseSpaceDiscretization)
FRENSIE_ADD_TEST(ObserverPhaseSpaceDiscretization)

FRENSIE_ADD_TEST_EXECUTABLE(ParticleHistorySimulationCompletionCriterion DEPENDS tstParticleHistorySimulationCompletionCriterion.cpp)
FRENSIE_ADD_TEST(ParticleHistorySimulationCompletionCriterion)

IF(${FRENSIE_ENABLE_OPENMP})
  FRENSIE_ADD_TEST(SharedParticleHistorySimulationCompletionCriterion_2
    TEST_EXEC_NAME_ROOT ParticleHistorySimulationCompletionCriterion
    EXTRA_ARGS --threads=2
    OPENMP_TEST)
  FRENSIE_ADD_TEST(SharedParticleHistorySimulationCompletionCriterion_4
    TEST_EXEC_NAME_ROOT ParticleHistorySimulationCompletionCriterion
    EXTRA_ARGS --threads=4
    OPENMP_TEST)
ENDIF()

IF(${FRENSIE_ENABLE_MPI})
  FRENSIE_ADD_TEST(DistributedParticleHistorySimulationCompletionCriterion
    TEST_EXEC_NAME_ROOT ParticleHistorySimulationCompletionCriterion
    MPI_PROCS 2)
  FRENSIE_ADD_TEST(DistributedParticleHistorySimulationCompletionCriterion
    TEST_EXEC_NAME_ROOT ParticleHistorySimulationCompletionCriterion
    MPI_PROCS 4)
ENDIF()

FRENSIE_FINALIZE_PACKAGE_TESTS(monte_carlo_event_core)
