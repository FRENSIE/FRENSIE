#!${PYTHON_EXECUTABLE}
##---------------------------------------------------------------------------##
##!
##! \file   generate_native_aepr.py
##! \author Alex Robinson
##! \brief  tool to generate the native aepr library
##!
##---------------------------------------------------------------------------##

# echo "generating aepr_native_1.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_1.xml --db_name=../../../database.xml --output_file_name=aepr_native_1.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-3 --adjoint_incoherent_grid_convergence_tol=1e-3 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_6.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_6.xml --db_name=../../../database.xml --output_file_name=aepr_native_6.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_7.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_7.xml --db_name=../../../database.xml --output_file_name=aepr_native_7.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating_aepr_native_8.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_8.xml --db_name=../../../database.xml --output_file_name=aepr_native_8.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_11.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_11.xml --db_name=../../../database.xml --output_file_name=aepr_native_11.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_12.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_12.xml --db_name=../../../database.xml --output_file_name=aepr_native_12.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_13.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_13.xml --db_name=../../../database.xml --output_file_name=aepr_native_13.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_14.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_14.xml --db_name=../../../database.xml --output_file_name=aepr_native_14.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_18.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_18.xml --db_name=../../../database.xml --output_file_name=aepr_native_18.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_19.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_19.xml --db_name=../../../database.xml --output_file_name=aepr_native_19.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_20.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_20.xml --db_name=../../../database.xml --output_file_name=aepr_native_20.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_22.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_22.xml --db_name=../../../database.xml --output_file_name=aepr_native_22.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_25.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_25.xml --db_name=../../../database.xml --output_file_name=aepr_native_25.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating aepr_native_26.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_26.xml --db_name=../../../database.xml --output_file_name=aepr_native_26.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16

# echo "generating_aepr_native_82.xml..."
# python ~/Research/transport/bin/native_epr_to_native_aepr.py --epr_file_name=../../epr/epr_native_82.xml --db_name=../../../database.xml --output_file_name=aepr_native_82.xml --overwrite --add_to_db --notes="updated adjoint incoherent cs scattering function evaluation" --min_photon_energy=1e-3 --max_photon_energy=20.0 --min_electron_energy=1e-5 --max_electron_energy=0.1 --photon_grid_convergence_tol=1e-3 --photon_grid_abs_diff_tol=1e-42 --photon_grid_dist_tol=1e-80 --adjoint_pp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_pp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_tp_energy_dist_norm_const_eval_tol=1e-3 --adjoint_tp_energy_dist_norm_const_nudge_val=1e-6 --adjoint_incoherent_max_energy_nudge_val=0.2 --adjoint_incoherent_energy_to_max_energy_nudge_val=1e-5 --adjoint_incoherent_eval_tol=1e-2 --adjoint_incoherent_grid_convergence_tol=1e-2 --adjoint_incoherent_grid_abs_diff_tol=1e-42 --adjoint_incoherent_grid_dist_tol=1e-80 --electron_grid_convergence_tol=1e-2 --electron_grid_abs_diff_tol=1e-20 --electron_grid_dist_tol=1e-16 --cutoff_angle_cosine=1.0 --num_moment_preserving_angles=0 --tabular_evaluation_tol=1e-7 --electron_two_d_interp_policy="LogLogLog" --electron_two_d_grid_policy="UnitBaseCorrelated" --bremss_min_energy_nudge_val=1e-9 --bremss_max_energy_nudge_val=1e-2 --bremss_eval_tol=1e-5 --bremss_grid_convergence_tol=1e-3 --bremss_grid_abs_diff_tol=1e-20 --bremss_grid_dist_tol=1e-16 --electroion_min_energy_nudge_val=1e-9 --electroion_max_energy_nudge_val=1e-2 --electroion_eval_tol=1e-5 --electroion_grid_convergence_tol=1e-3 --electroion_grid_abs_diff_tol=1e-20 --electroion_grid_dist_tol=1e-16


import sys
from os import path
from optparse import *
from native_endl_to_native_epr import generateData, addToDatabase
import PyFrensie.Utility as Utility
import PyFrensie.Data as Data
import PyFrensie.Data.Native as Native
import PyFrensie.MonteCarlo as MonteCarlo

# Generate the native aepr library using cached parameters
def generateNativeAEPRLibrary( native_directory,
                               native_adjoint_directory,
                               overwrite,
                               db_name,
                               log_file ):

    # Check if the native directory exists
    if not path.isdir( options.native_directory ):
        print "The native directory " + options.native_directory + " does not exist!"
        sys.exit(1)

    # Check if the native adjoint directory exists
    if not path.isdir( options.native_adjoint_directory ):
        print "The native adjoint directory " + options.native_adjoint_directory + " does not exist!"
        sys.exit(1)

    # Open the database
    database = Data.ScatteringCenterPropertiesDatabase( db_name )

    # The table of parameters used to generate the aepr library
    # parameter_table = \
    # {"header": ["In", "Out", "Ep,min", "Ep,max", "Ee,min", "Ee,max", "Conv tol p", "Abs Diff tol p", "Dist tol p", "Adj pp e dist norm const eval tol", "Adj pp e dist norm const nudge val", "Adj tp e dist norm const e val tol", "Adj tp e dist norm const nudge val", "Adj incoh max e nudge val", "Adj incoh e to max e nudge val", "Adj incoh eval tol", "Adj incoh grid conv tol", "Adj incoh grid abs diff tol", "Adj incoh grid dist tol", "Conv tol e", "Abs Diff tol e", "Dist tol e", "cutoff angle cos", "num mom pres angles", "tab eval tol", "2D interp pol e", "2D grid pol e", "brems min energy nudge val", "brems max energy nudge val", "brems eval tol", "brems grid conv tol", "brems grid abs diff tol", "brems grid dist tol", "eion eval tol", "eion grid conv tol", "eion grid abs diff tol", "eion grid dist tol"],
    #  1       : ["epr_native_1.xml", "aepr_native_1.xml", 1e-3, 20.0, 1e-5, 0.1, 1e-3, 1e-42, 1e-80, 1e-3, 1e-6, 1e-3, 1e-6, 0.2, 1e-5, 1e-3, 1e-3, 1e-42, 1e-80, 1e-2, 1e-20, 1e-16, 1.0, 0, 1e-7, "LogLogLog", "UnitBaseCorrelated", 1e-9, 1e-2, 1e-5, 1e-3, 1e-20, 1e-16, 1e-9, 1e-2, 1e-5, 1e-3, 1e-20, 1e-16],
    

##---------------------------------------------------------------------------##
## end generate_native_aepr.py
##---------------------------------------------------------------------------##
